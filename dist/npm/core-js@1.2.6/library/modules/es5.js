/* */
'use strict';

System.register([], function (_export, _context) {
  var $, $export, DESCRIPTORS, createDesc, html, cel, has, cof, invoke, fails, anObject, aFunction, isObject, toObject, toIObject, toInteger, toIndex, toLength, IObject, IE_PROTO, createArrayMethod, arrayIndexOf, ObjectProto, ArrayProto, arraySlice, arrayJoin, defineProperty, getOwnDescriptor, defineProperties, factories, IE8_DOM_DEFINE, keys1, keys2, keysLen1, _createDict, createGetKeys, Empty, construct, createArrayReduce, methodize, lz;

  return {
    setters: [],
    execute: function () {
      $ = require('./$');
      $export = require('./$.export');
      DESCRIPTORS = require('./$.descriptors');
      createDesc = require('./$.property-desc');
      html = require('./$.html');
      cel = require('./$.dom-create');
      has = require('./$.has');
      cof = require('./$.cof');
      invoke = require('./$.invoke');
      fails = require('./$.fails');
      anObject = require('./$.an-object');
      aFunction = require('./$.a-function');
      isObject = require('./$.is-object');
      toObject = require('./$.to-object');
      toIObject = require('./$.to-iobject');
      toInteger = require('./$.to-integer');
      toIndex = require('./$.to-index');
      toLength = require('./$.to-length');
      IObject = require('./$.iobject');
      IE_PROTO = require('./$.uid')('__proto__');
      createArrayMethod = require('./$.array-methods');
      arrayIndexOf = require('./$.array-includes')(false);
      ObjectProto = Object.prototype;
      ArrayProto = Array.prototype;
      arraySlice = ArrayProto.slice;
      arrayJoin = ArrayProto.join;
      defineProperty = $.setDesc;
      getOwnDescriptor = $.getDesc;
      defineProperties = $.setDescs;
      factories = {};

      if (!DESCRIPTORS) {
        IE8_DOM_DEFINE = !fails(function () {
          return defineProperty(cel('div'), 'a', { get: function get() {
              return 7;
            } }).a != 7;
        });
        $.setDesc = function (O, P, Attributes) {
          if (IE8_DOM_DEFINE) try {
            return defineProperty(O, P, Attributes);
          } catch (e) {}
          if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');
          if ('value' in Attributes) anObject(O)[P] = Attributes.value;
          return O;
        };
        $.getDesc = function (O, P) {
          if (IE8_DOM_DEFINE) try {
            return getOwnDescriptor(O, P);
          } catch (e) {}
          if (has(O, P)) return createDesc(!ObjectProto.propertyIsEnumerable.call(O, P), O[P]);
        };
        $.setDescs = defineProperties = function defineProperties(O, Properties) {
          anObject(O);
          var keys = $.getKeys(Properties),
              length = keys.length,
              i = 0,
              P;
          while (length > i) {
            $.setDesc(O, P = keys[i++], Properties[P]);
          }return O;
        };
      }
      $export($export.S + $export.F * !DESCRIPTORS, 'Object', {
        getOwnPropertyDescriptor: $.getDesc,
        defineProperty: $.setDesc,
        defineProperties: defineProperties
      });
      keys1 = ('constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,' + 'toLocaleString,toString,valueOf').split(',');
      keys2 = keys1.concat('length', 'prototype');
      keysLen1 = keys1.length;

      _createDict = function createDict() {
        var iframe = cel('iframe'),
            i = keysLen1,
            gt = '>',
            iframeDocument;
        iframe.style.display = 'none';
        html.appendChild(iframe);
        iframe.src = 'javascript:';
        iframeDocument = iframe.contentWindow.document;
        iframeDocument.open();
        iframeDocument.write('<script>document.F=Object</script' + gt);
        iframeDocument.close();
        _createDict = iframeDocument.F;
        while (i--) {
          delete _createDict.prototype[keys1[i]];
        }return _createDict();
      };

      createGetKeys = function createGetKeys(names, length) {
        return function (object) {
          var O = toIObject(object),
              i = 0,
              result = [],
              key;
          for (key in O) {
            if (key != IE_PROTO) has(O, key) && result.push(key);
          }while (length > i) {
            if (has(O, key = names[i++])) {
              ~arrayIndexOf(result, key) || result.push(key);
            }
          }return result;
        };
      };

      Empty = function Empty() {};

      $export($export.S, 'Object', {
        getPrototypeOf: $.getProto = $.getProto || function (O) {
          O = toObject(O);
          if (has(O, IE_PROTO)) return O[IE_PROTO];
          if (typeof O.constructor == 'function' && O instanceof O.constructor) {
            return O.constructor.prototype;
          }
          return O instanceof Object ? ObjectProto : null;
        },
        getOwnPropertyNames: $.getNames = $.getNames || createGetKeys(keys2, keys2.length, true),
        create: $.create = $.create || function (O, Properties) {
          var result;
          if (O !== null) {
            Empty.prototype = anObject(O);
            result = new Empty();
            Empty.prototype = null;
            result[IE_PROTO] = O;
          } else result = _createDict();
          return Properties === undefined ? result : defineProperties(result, Properties);
        },
        keys: $.getKeys = $.getKeys || createGetKeys(keys1, keysLen1, false)
      });

      construct = function construct(F, len, args) {
        if (!(len in factories)) {
          for (var n = [], i = 0; i < len; i++) {
            n[i] = 'a[' + i + ']';
          }factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');
        }
        return factories[len](F, args);
      };

      $export($export.P, 'Function', { bind: function bind(that) {
          var fn = aFunction(this),
              partArgs = arraySlice.call(arguments, 1);
          var bound = function bound() {
            var args = partArgs.concat(arraySlice.call(arguments));
            return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);
          };
          if (isObject(fn.prototype)) bound.prototype = fn.prototype;
          return bound;
        } });
      $export($export.P + $export.F * fails(function () {
        if (html) arraySlice.call(html);
      }), 'Array', { slice: function slice(begin, end) {
          var len = toLength(this.length),
              klass = cof(this);
          end = end === undefined ? len : end;
          if (klass == 'Array') return arraySlice.call(this, begin, end);
          var start = toIndex(begin, len),
              upTo = toIndex(end, len),
              size = toLength(upTo - start),
              cloned = Array(size),
              i = 0;
          for (; i < size; i++) {
            cloned[i] = klass == 'String' ? this.charAt(start + i) : this[start + i];
          }return cloned;
        } });
      $export($export.P + $export.F * (IObject != Object), 'Array', { join: function join(separator) {
          return arrayJoin.call(IObject(this), separator === undefined ? ',' : separator);
        } });
      $export($export.S, 'Array', { isArray: require('./$.is-array') });

      createArrayReduce = function createArrayReduce(isRight) {
        return function (callbackfn, memo) {
          aFunction(callbackfn);
          var O = IObject(this),
              length = toLength(O.length),
              index = isRight ? length - 1 : 0,
              i = isRight ? -1 : 1;
          if (arguments.length < 2) for (;;) {
            if (index in O) {
              memo = O[index];
              index += i;
              break;
            }
            index += i;
            if (isRight ? index < 0 : length <= index) {
              throw TypeError('Reduce of empty array with no initial value');
            }
          }
          for (; isRight ? index >= 0 : length > index; index += i) {
            if (index in O) {
              memo = callbackfn(memo, O[index], index, this);
            }
          }return memo;
        };
      };

      methodize = function methodize($fn) {
        return function (arg1) {
          return $fn(this, arg1, arguments[1]);
        };
      };

      $export($export.P, 'Array', {
        forEach: $.each = $.each || methodize(createArrayMethod(0)),
        map: methodize(createArrayMethod(1)),
        filter: methodize(createArrayMethod(2)),
        some: methodize(createArrayMethod(3)),
        every: methodize(createArrayMethod(4)),
        reduce: createArrayReduce(false),
        reduceRight: createArrayReduce(true),
        indexOf: methodize(arrayIndexOf),
        lastIndexOf: function lastIndexOf(el, fromIndex) {
          var O = toIObject(this),
              length = toLength(O.length),
              index = length - 1;
          if (arguments.length > 1) index = Math.min(index, toInteger(fromIndex));
          if (index < 0) index = toLength(length + index);
          for (; index >= 0; index--) {
            if (index in O) if (O[index] === el) return index;
          }return -1;
        }
      });
      $export($export.S, 'Date', { now: function now() {
          return +new Date();
        } });

      lz = function lz(num) {
        return num > 9 ? num : '0' + num;
      };

      $export($export.P + $export.F * (fails(function () {
        return new Date(-5e13 - 1).toISOString() != '0385-07-25T07:06:39.999Z';
      }) || !fails(function () {
        new Date(NaN).toISOString();
      })), 'Date', { toISOString: function toISOString() {
          if (!isFinite(this)) throw RangeError('Invalid time value');
          var d = this,
              y = d.getUTCFullYear(),
              m = d.getUTCMilliseconds(),
              s = y < 0 ? '-' : y > 9999 ? '+' : '';
          return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) + '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) + 'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) + ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';
        } });
    }
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5wbS9jb3JlLWpzQDEuMi42L2xpYnJhcnkvbW9kdWxlcy9lczUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOzs7Ozs7OztBQUNJLFVBQUksUUFBUSxLQUFSO0FBQ0osZ0JBQVUsUUFBUSxZQUFSO0FBQ1Ysb0JBQWMsUUFBUSxpQkFBUjtBQUNkLG1CQUFhLFFBQVEsbUJBQVI7QUFDYixhQUFPLFFBQVEsVUFBUjtBQUNQLFlBQU0sUUFBUSxnQkFBUjtBQUNOLFlBQU0sUUFBUSxTQUFSO0FBQ04sWUFBTSxRQUFRLFNBQVI7QUFDTixlQUFTLFFBQVEsWUFBUjtBQUNULGNBQVEsUUFBUSxXQUFSO0FBQ1IsaUJBQVcsUUFBUSxlQUFSO0FBQ1gsa0JBQVksUUFBUSxnQkFBUjtBQUNaLGlCQUFXLFFBQVEsZUFBUjtBQUNYLGlCQUFXLFFBQVEsZUFBUjtBQUNYLGtCQUFZLFFBQVEsZ0JBQVI7QUFDWixrQkFBWSxRQUFRLGdCQUFSO0FBQ1osZ0JBQVUsUUFBUSxjQUFSO0FBQ1YsaUJBQVcsUUFBUSxlQUFSO0FBQ1gsZ0JBQVUsUUFBUSxhQUFSO0FBQ1YsaUJBQVcsUUFBUSxTQUFSLEVBQW1CLFdBQW5CO0FBQ1gsMEJBQW9CLFFBQVEsbUJBQVI7QUFDcEIscUJBQWUsUUFBUSxvQkFBUixFQUE4QixLQUE5QjtBQUNmLG9CQUFjLE9BQU8sU0FBUDtBQUNkLG1CQUFhLE1BQU0sU0FBTjtBQUNiLG1CQUFhLFdBQVcsS0FBWDtBQUNiLGtCQUFZLFdBQVcsSUFBWDtBQUNaLHVCQUFpQixFQUFFLE9BQUY7QUFDakIseUJBQW1CLEVBQUUsT0FBRjtBQUNuQix5QkFBbUIsRUFBRSxRQUFGO0FBQ25CLGtCQUFZOztBQUVoQixVQUFJLENBQUMsV0FBRCxFQUFjO0FBQ2hCLHlCQUFpQixDQUFDLE1BQU0sWUFBVztBQUNqQyxpQkFBTyxlQUFlLElBQUksS0FBSixDQUFmLEVBQTJCLEdBQTNCLEVBQWdDLEVBQUMsS0FBSyxlQUFXO0FBQ3BELHFCQUFPLENBQVAsQ0FEb0Q7YUFBWCxFQUF0QyxFQUVELENBRkMsSUFFSSxDQUZKLENBRDBCO1NBQVgsQ0FBUCxDQUREO0FBTWhCLFVBQUUsT0FBRixHQUFZLFVBQVMsQ0FBVCxFQUFZLENBQVosRUFBZSxVQUFmLEVBQTJCO0FBQ3JDLGNBQUksY0FBSixFQUNFLElBQUk7QUFDRixtQkFBTyxlQUFlLENBQWYsRUFBa0IsQ0FBbEIsRUFBcUIsVUFBckIsQ0FBUCxDQURFO1dBQUosQ0FFRSxPQUFPLENBQVAsRUFBVSxFQUFWO0FBQ0osY0FBSSxTQUFTLFVBQVQsSUFBdUIsU0FBUyxVQUFULEVBQ3pCLE1BQU0sVUFBVSwwQkFBVixDQUFOLENBREY7QUFFQSxjQUFJLFdBQVcsVUFBWCxFQUNGLFNBQVMsQ0FBVCxFQUFZLENBQVosSUFBaUIsV0FBVyxLQUFYLENBRG5CO0FBRUEsaUJBQU8sQ0FBUCxDQVRxQztTQUEzQixDQU5JO0FBaUJoQixVQUFFLE9BQUYsR0FBWSxVQUFTLENBQVQsRUFBWSxDQUFaLEVBQWU7QUFDekIsY0FBSSxjQUFKLEVBQ0UsSUFBSTtBQUNGLG1CQUFPLGlCQUFpQixDQUFqQixFQUFvQixDQUFwQixDQUFQLENBREU7V0FBSixDQUVFLE9BQU8sQ0FBUCxFQUFVLEVBQVY7QUFDSixjQUFJLElBQUksQ0FBSixFQUFPLENBQVAsQ0FBSixFQUNFLE9BQU8sV0FBVyxDQUFDLFlBQVksb0JBQVosQ0FBaUMsSUFBakMsQ0FBc0MsQ0FBdEMsRUFBeUMsQ0FBekMsQ0FBRCxFQUE4QyxFQUFFLENBQUYsQ0FBekQsQ0FBUCxDQURGO1NBTFUsQ0FqQkk7QUF5QmhCLFVBQUUsUUFBRixHQUFhLG1CQUFtQiwwQkFBUyxDQUFULEVBQVksVUFBWixFQUF3QjtBQUN0RCxtQkFBUyxDQUFULEVBRHNEO0FBRXRELGNBQUksT0FBTyxFQUFFLE9BQUYsQ0FBVSxVQUFWLENBQVA7Y0FDQSxTQUFTLEtBQUssTUFBTDtjQUNULElBQUksQ0FBSjtjQUNBLENBSEosQ0FGc0Q7QUFNdEQsaUJBQU8sU0FBUyxDQUFUO0FBQ0wsY0FBRSxPQUFGLENBQVUsQ0FBVixFQUFhLElBQUksS0FBSyxHQUFMLENBQUosRUFBZSxXQUFXLENBQVgsQ0FBNUI7V0FERixPQUVPLENBQVAsQ0FSc0Q7U0FBeEIsQ0F6QmhCO09BQWxCO0FBb0NBLGNBQVEsUUFBUSxDQUFSLEdBQVksUUFBUSxDQUFSLEdBQVksQ0FBQyxXQUFELEVBQWMsUUFBOUMsRUFBd0Q7QUFDdEQsa0NBQTBCLEVBQUUsT0FBRjtBQUMxQix3QkFBZ0IsRUFBRSxPQUFGO0FBQ2hCLDBCQUFrQixnQkFBbEI7T0FIRjtBQUtJLGNBQVEsQ0FBQyxtRUFBbUUsaUNBQW5FLENBQUQsQ0FBdUcsS0FBdkcsQ0FBNkcsR0FBN0c7QUFDUixjQUFRLE1BQU0sTUFBTixDQUFhLFFBQWIsRUFBdUIsV0FBdkI7QUFDUixpQkFBVyxNQUFNLE1BQU47O0FBQ1gsb0JBQWEsc0JBQVc7QUFDMUIsWUFBSSxTQUFTLElBQUksUUFBSixDQUFUO1lBQ0EsSUFBSSxRQUFKO1lBQ0EsS0FBSyxHQUFMO1lBQ0EsY0FISixDQUQwQjtBQUsxQixlQUFPLEtBQVAsQ0FBYSxPQUFiLEdBQXVCLE1BQXZCLENBTDBCO0FBTTFCLGFBQUssV0FBTCxDQUFpQixNQUFqQixFQU4wQjtBQU8xQixlQUFPLEdBQVAsR0FBYSxhQUFiLENBUDBCO0FBUTFCLHlCQUFpQixPQUFPLGFBQVAsQ0FBcUIsUUFBckIsQ0FSUztBQVMxQix1QkFBZSxJQUFmLEdBVDBCO0FBVTFCLHVCQUFlLEtBQWYsQ0FBcUIsc0NBQXNDLEVBQXRDLENBQXJCLENBVjBCO0FBVzFCLHVCQUFlLEtBQWYsR0FYMEI7QUFZMUIsc0JBQWEsZUFBZSxDQUFmLENBWmE7QUFhMUIsZUFBTyxHQUFQO0FBQ0UsaUJBQU8sWUFBVyxTQUFYLENBQXFCLE1BQU0sQ0FBTixDQUFyQixDQUFQO1NBREYsT0FFTyxhQUFQLENBZjBCO09BQVg7O0FBaUJiLHNCQUFnQixTQUFoQixhQUFnQixDQUFTLEtBQVQsRUFBZ0IsTUFBaEIsRUFBd0I7QUFDMUMsZUFBTyxVQUFTLE1BQVQsRUFBaUI7QUFDdEIsY0FBSSxJQUFJLFVBQVUsTUFBVixDQUFKO2NBQ0EsSUFBSSxDQUFKO2NBQ0EsU0FBUyxFQUFUO2NBQ0EsR0FISixDQURzQjtBQUt0QixlQUFLLEdBQUwsSUFBWSxDQUFaO0FBQ0UsZ0JBQUksT0FBTyxRQUFQLEVBQ0YsSUFBSSxDQUFKLEVBQU8sR0FBUCxLQUFlLE9BQU8sSUFBUCxDQUFZLEdBQVosQ0FBZixDQURGO1dBREYsT0FHTyxTQUFTLENBQVQ7QUFDTCxnQkFBSSxJQUFJLENBQUosRUFBTyxNQUFNLE1BQU0sR0FBTixDQUFOLENBQVgsRUFBOEI7QUFDNUIsZUFBQyxhQUFhLE1BQWIsRUFBcUIsR0FBckIsQ0FBRCxJQUE4QixPQUFPLElBQVAsQ0FBWSxHQUFaLENBQTlCLENBRDRCO2FBQTlCO1dBREYsT0FJTyxNQUFQLENBWnNCO1NBQWpCLENBRG1DO09BQXhCOztBQWdCaEIsY0FBUSxTQUFSLEtBQVEsR0FBVyxFQUFYOztBQUNaLGNBQVEsUUFBUSxDQUFSLEVBQVcsUUFBbkIsRUFBNkI7QUFDM0Isd0JBQWdCLEVBQUUsUUFBRixHQUFhLEVBQUUsUUFBRixJQUFjLFVBQVMsQ0FBVCxFQUFZO0FBQ3JELGNBQUksU0FBUyxDQUFULENBQUosQ0FEcUQ7QUFFckQsY0FBSSxJQUFJLENBQUosRUFBTyxRQUFQLENBQUosRUFDRSxPQUFPLEVBQUUsUUFBRixDQUFQLENBREY7QUFFQSxjQUFJLE9BQU8sRUFBRSxXQUFGLElBQWlCLFVBQXhCLElBQXNDLGFBQWEsRUFBRSxXQUFGLEVBQWU7QUFDcEUsbUJBQU8sRUFBRSxXQUFGLENBQWMsU0FBZCxDQUQ2RDtXQUF0RTtBQUdBLGlCQUFPLGFBQWEsTUFBYixHQUFzQixXQUF0QixHQUFvQyxJQUFwQyxDQVA4QztTQUFaO0FBUzNDLDZCQUFxQixFQUFFLFFBQUYsR0FBYSxFQUFFLFFBQUYsSUFBYyxjQUFjLEtBQWQsRUFBcUIsTUFBTSxNQUFOLEVBQWMsSUFBbkMsQ0FBZDtBQUNsQyxnQkFBUSxFQUFFLE1BQUYsR0FBVyxFQUFFLE1BQUYsSUFBWSxVQUFTLENBQVQsRUFBWSxVQUFaLEVBQXdCO0FBQ3JELGNBQUksTUFBSixDQURxRDtBQUVyRCxjQUFJLE1BQU0sSUFBTixFQUFZO0FBQ2Qsa0JBQU0sU0FBTixHQUFrQixTQUFTLENBQVQsQ0FBbEIsQ0FEYztBQUVkLHFCQUFTLElBQUksS0FBSixFQUFULENBRmM7QUFHZCxrQkFBTSxTQUFOLEdBQWtCLElBQWxCLENBSGM7QUFJZCxtQkFBTyxRQUFQLElBQW1CLENBQW5CLENBSmM7V0FBaEIsTUFNRSxTQUFTLGFBQVQsQ0FORjtBQU9BLGlCQUFPLGVBQWUsU0FBZixHQUEyQixNQUEzQixHQUFvQyxpQkFBaUIsTUFBakIsRUFBeUIsVUFBekIsQ0FBcEMsQ0FUOEM7U0FBeEI7QUFXL0IsY0FBTSxFQUFFLE9BQUYsR0FBWSxFQUFFLE9BQUYsSUFBYSxjQUFjLEtBQWQsRUFBcUIsUUFBckIsRUFBK0IsS0FBL0IsQ0FBYjtPQXRCcEI7O0FBd0JJLGtCQUFZLFNBQVosU0FBWSxDQUFTLENBQVQsRUFBWSxHQUFaLEVBQWlCLElBQWpCLEVBQXVCO0FBQ3JDLFlBQUksRUFBRSxPQUFPLFNBQVAsQ0FBRixFQUFxQjtBQUN2QixlQUFLLElBQUksSUFBSSxFQUFKLEVBQ0wsSUFBSSxDQUFKLEVBQU8sSUFBSSxHQUFKLEVBQVMsR0FEcEI7QUFFRSxjQUFFLENBQUYsSUFBTyxPQUFPLENBQVAsR0FBVyxHQUFYO1dBRlQsU0FHQSxDQUFVLEdBQVYsSUFBaUIsU0FBUyxLQUFULEVBQWdCLGtCQUFrQixFQUFFLElBQUYsQ0FBTyxHQUFQLENBQWxCLEdBQWdDLEdBQWhDLENBQWpDLENBSnVCO1NBQXpCO0FBTUEsZUFBTyxVQUFVLEdBQVYsRUFBZSxDQUFmLEVBQWtCLElBQWxCLENBQVAsQ0FQcUM7T0FBdkI7O0FBU2hCLGNBQVEsUUFBUSxDQUFSLEVBQVcsVUFBbkIsRUFBK0IsRUFBQyxNQUFNLFNBQVMsSUFBVCxDQUFjLElBQWQsRUFBb0I7QUFDdEQsY0FBSSxLQUFLLFVBQVUsSUFBVixDQUFMO2NBQ0EsV0FBVyxXQUFXLElBQVgsQ0FBZ0IsU0FBaEIsRUFBMkIsQ0FBM0IsQ0FBWCxDQUZrRDtBQUd0RCxjQUFJLFFBQVEsU0FBUixLQUFRLEdBQVc7QUFDckIsZ0JBQUksT0FBTyxTQUFTLE1BQVQsQ0FBZ0IsV0FBVyxJQUFYLENBQWdCLFNBQWhCLENBQWhCLENBQVAsQ0FEaUI7QUFFckIsbUJBQU8sZ0JBQWdCLEtBQWhCLEdBQXdCLFVBQVUsRUFBVixFQUFjLEtBQUssTUFBTCxFQUFhLElBQTNCLENBQXhCLEdBQTJELE9BQU8sRUFBUCxFQUFXLElBQVgsRUFBaUIsSUFBakIsQ0FBM0QsQ0FGYztXQUFYLENBSDBDO0FBT3RELGNBQUksU0FBUyxHQUFHLFNBQUgsQ0FBYixFQUNFLE1BQU0sU0FBTixHQUFrQixHQUFHLFNBQUgsQ0FEcEI7QUFFQSxpQkFBTyxLQUFQLENBVHNEO1NBQXBCLEVBQXRDO0FBV0EsY0FBUSxRQUFRLENBQVIsR0FBWSxRQUFRLENBQVIsR0FBWSxNQUFNLFlBQVc7QUFDL0MsWUFBSSxJQUFKLEVBQ0UsV0FBVyxJQUFYLENBQWdCLElBQWhCLEVBREY7T0FEb0MsQ0FBbEIsRUFHaEIsT0FISixFQUdhLEVBQUMsT0FBTyxlQUFTLEtBQVQsRUFBZ0IsR0FBaEIsRUFBcUI7QUFDdEMsY0FBSSxNQUFNLFNBQVMsS0FBSyxNQUFMLENBQWY7Y0FDQSxRQUFRLElBQUksSUFBSixDQUFSLENBRmtDO0FBR3RDLGdCQUFNLFFBQVEsU0FBUixHQUFvQixHQUFwQixHQUEwQixHQUExQixDQUhnQztBQUl0QyxjQUFJLFNBQVMsT0FBVCxFQUNGLE9BQU8sV0FBVyxJQUFYLENBQWdCLElBQWhCLEVBQXNCLEtBQXRCLEVBQTZCLEdBQTdCLENBQVAsQ0FERjtBQUVBLGNBQUksUUFBUSxRQUFRLEtBQVIsRUFBZSxHQUFmLENBQVI7Y0FDQSxPQUFPLFFBQVEsR0FBUixFQUFhLEdBQWIsQ0FBUDtjQUNBLE9BQU8sU0FBUyxPQUFPLEtBQVAsQ0FBaEI7Y0FDQSxTQUFTLE1BQU0sSUFBTixDQUFUO2NBQ0EsSUFBSSxDQUFKLENBVmtDO0FBV3RDLGlCQUFPLElBQUksSUFBSixFQUFVLEdBQWpCO0FBQ0UsbUJBQU8sQ0FBUCxJQUFZLFNBQVMsUUFBVCxHQUFvQixLQUFLLE1BQUwsQ0FBWSxRQUFRLENBQVIsQ0FBaEMsR0FBNkMsS0FBSyxRQUFRLENBQVIsQ0FBbEQ7V0FEZCxPQUVPLE1BQVAsQ0Fic0M7U0FBckIsRUFIckI7QUFrQkEsY0FBUSxRQUFRLENBQVIsR0FBWSxRQUFRLENBQVIsSUFBYSxXQUFXLE1BQVgsQ0FBYixFQUFpQyxPQUFyRCxFQUE4RCxFQUFDLE1BQU0sU0FBUyxJQUFULENBQWMsU0FBZCxFQUF5QjtBQUMxRixpQkFBTyxVQUFVLElBQVYsQ0FBZSxRQUFRLElBQVIsQ0FBZixFQUE4QixjQUFjLFNBQWQsR0FBMEIsR0FBMUIsR0FBZ0MsU0FBaEMsQ0FBckMsQ0FEMEY7U0FBekIsRUFBckU7QUFHQSxjQUFRLFFBQVEsQ0FBUixFQUFXLE9BQW5CLEVBQTRCLEVBQUMsU0FBUyxRQUFRLGNBQVIsQ0FBVCxFQUE3Qjs7QUFDSSwwQkFBb0IsU0FBcEIsaUJBQW9CLENBQVMsT0FBVCxFQUFrQjtBQUN4QyxlQUFPLFVBQVMsVUFBVCxFQUFxQixJQUFyQixFQUEyQjtBQUNoQyxvQkFBVSxVQUFWLEVBRGdDO0FBRWhDLGNBQUksSUFBSSxRQUFRLElBQVIsQ0FBSjtjQUNBLFNBQVMsU0FBUyxFQUFFLE1BQUYsQ0FBbEI7Y0FDQSxRQUFRLFVBQVUsU0FBUyxDQUFULEdBQWEsQ0FBdkI7Y0FDUixJQUFJLFVBQVUsQ0FBQyxDQUFELEdBQUssQ0FBZixDQUx3QjtBQU1oQyxjQUFJLFVBQVUsTUFBVixHQUFtQixDQUFuQixFQUNGLFNBQVc7QUFDVCxnQkFBSSxTQUFTLENBQVQsRUFBWTtBQUNkLHFCQUFPLEVBQUUsS0FBRixDQUFQLENBRGM7QUFFZCx1QkFBUyxDQUFULENBRmM7QUFHZCxvQkFIYzthQUFoQjtBQUtBLHFCQUFTLENBQVQsQ0FOUztBQU9ULGdCQUFJLFVBQVUsUUFBUSxDQUFSLEdBQVksVUFBVSxLQUFWLEVBQWlCO0FBQ3pDLG9CQUFNLFVBQVUsNkNBQVYsQ0FBTixDQUR5QzthQUEzQztXQVBGO0FBV0YsaUJBQU8sVUFBVSxTQUFTLENBQVQsR0FBYSxTQUFTLEtBQVQsRUFBZ0IsU0FBUyxDQUFUO0FBQzVDLGdCQUFJLFNBQVMsQ0FBVCxFQUFZO0FBQ2QscUJBQU8sV0FBVyxJQUFYLEVBQWlCLEVBQUUsS0FBRixDQUFqQixFQUEyQixLQUEzQixFQUFrQyxJQUFsQyxDQUFQLENBRGM7YUFBaEI7V0FERixPQUlPLElBQVAsQ0F0QmdDO1NBQTNCLENBRGlDO09BQWxCOztBQTBCcEIsa0JBQVksU0FBWixTQUFZLENBQVMsR0FBVCxFQUFjO0FBQzVCLGVBQU8sVUFBUyxJQUFULEVBQWU7QUFDcEIsaUJBQU8sSUFBSSxJQUFKLEVBQVUsSUFBVixFQUFnQixVQUFVLENBQVYsQ0FBaEIsQ0FBUCxDQURvQjtTQUFmLENBRHFCO09BQWQ7O0FBS2hCLGNBQVEsUUFBUSxDQUFSLEVBQVcsT0FBbkIsRUFBNEI7QUFDMUIsaUJBQVMsRUFBRSxJQUFGLEdBQVMsRUFBRSxJQUFGLElBQVUsVUFBVSxrQkFBa0IsQ0FBbEIsQ0FBVixDQUFWO0FBQ2xCLGFBQUssVUFBVSxrQkFBa0IsQ0FBbEIsQ0FBVixDQUFMO0FBQ0EsZ0JBQVEsVUFBVSxrQkFBa0IsQ0FBbEIsQ0FBVixDQUFSO0FBQ0EsY0FBTSxVQUFVLGtCQUFrQixDQUFsQixDQUFWLENBQU47QUFDQSxlQUFPLFVBQVUsa0JBQWtCLENBQWxCLENBQVYsQ0FBUDtBQUNBLGdCQUFRLGtCQUFrQixLQUFsQixDQUFSO0FBQ0EscUJBQWEsa0JBQWtCLElBQWxCLENBQWI7QUFDQSxpQkFBUyxVQUFVLFlBQVYsQ0FBVDtBQUNBLHFCQUFhLHFCQUFTLEVBQVQsRUFBYSxTQUFiLEVBQXdCO0FBQ25DLGNBQUksSUFBSSxVQUFVLElBQVYsQ0FBSjtjQUNBLFNBQVMsU0FBUyxFQUFFLE1BQUYsQ0FBbEI7Y0FDQSxRQUFRLFNBQVMsQ0FBVCxDQUh1QjtBQUluQyxjQUFJLFVBQVUsTUFBVixHQUFtQixDQUFuQixFQUNGLFFBQVEsS0FBSyxHQUFMLENBQVMsS0FBVCxFQUFnQixVQUFVLFNBQVYsQ0FBaEIsQ0FBUixDQURGO0FBRUEsY0FBSSxRQUFRLENBQVIsRUFDRixRQUFRLFNBQVMsU0FBUyxLQUFULENBQWpCLENBREY7QUFFQSxpQkFBTyxTQUFTLENBQVQsRUFBWSxPQUFuQjtBQUNFLGdCQUFJLFNBQVMsQ0FBVCxFQUNGLElBQUksRUFBRSxLQUFGLE1BQWEsRUFBYixFQUNGLE9BQU8sS0FBUCxDQURGO1dBRkosT0FJTyxDQUFDLENBQUQsQ0FaNEI7U0FBeEI7T0FUZjtBQXdCQSxjQUFRLFFBQVEsQ0FBUixFQUFXLE1BQW5CLEVBQTJCLEVBQUMsS0FBSyxlQUFXO0FBQ3hDLGlCQUFPLENBQUMsSUFBSSxJQUFKLEVBQUQsQ0FEaUM7U0FBWCxFQUFqQzs7QUFHSSxXQUFLLFNBQUwsRUFBSyxDQUFTLEdBQVQsRUFBYztBQUNyQixlQUFPLE1BQU0sQ0FBTixHQUFVLEdBQVYsR0FBZ0IsTUFBTSxHQUFOLENBREY7T0FBZDs7QUFHVCxjQUFRLFFBQVEsQ0FBUixHQUFZLFFBQVEsQ0FBUixJQUFhLE1BQU0sWUFBVztBQUNoRCxlQUFPLElBQUksSUFBSixDQUFTLENBQUMsSUFBRCxHQUFRLENBQVIsQ0FBVCxDQUFvQixXQUFwQixNQUFxQywwQkFBckMsQ0FEeUM7T0FBWCxDQUFOLElBRTNCLENBQUMsTUFBTSxZQUFXO0FBQ3RCLFlBQUksSUFBSixDQUFTLEdBQVQsRUFBYyxXQUFkLEdBRHNCO09BQVgsQ0FBUCxDQUZjLEVBSWYsTUFKTCxFQUlhLEVBQUMsYUFBYSxTQUFTLFdBQVQsR0FBdUI7QUFDOUMsY0FBSSxDQUFDLFNBQVMsSUFBVCxDQUFELEVBQ0YsTUFBTSxXQUFXLG9CQUFYLENBQU4sQ0FERjtBQUVBLGNBQUksSUFBSSxJQUFKO2NBQ0EsSUFBSSxFQUFFLGNBQUYsRUFBSjtjQUNBLElBQUksRUFBRSxrQkFBRixFQUFKO2NBQ0EsSUFBSSxJQUFJLENBQUosR0FBUSxHQUFSLEdBQWMsSUFBSSxJQUFKLEdBQVcsR0FBWCxHQUFpQixFQUFqQixDQU53QjtBQU85QyxpQkFBTyxJQUFJLENBQUMsVUFBVSxLQUFLLEdBQUwsQ0FBUyxDQUFULENBQVYsQ0FBRCxDQUF3QixLQUF4QixDQUE4QixJQUFJLENBQUMsQ0FBRCxHQUFLLENBQUMsQ0FBRCxDQUEzQyxHQUFpRCxHQUFqRCxHQUF1RCxHQUFHLEVBQUUsV0FBRixLQUFrQixDQUFsQixDQUExRCxHQUFpRixHQUFqRixHQUF1RixHQUFHLEVBQUUsVUFBRixFQUFILENBQXZGLEdBQTRHLEdBQTVHLEdBQWtILEdBQUcsRUFBRSxXQUFGLEVBQUgsQ0FBbEgsR0FBd0ksR0FBeEksR0FBOEksR0FBRyxFQUFFLGFBQUYsRUFBSCxDQUE5SSxHQUFzSyxHQUF0SyxHQUE0SyxHQUFHLEVBQUUsYUFBRixFQUFILENBQTVLLEdBQW9NLEdBQXBNLElBQTJNLElBQUksRUFBSixHQUFTLENBQVQsR0FBYSxNQUFNLEdBQUcsQ0FBSCxDQUFOLENBQXhOLEdBQXVPLEdBQXZPLENBUHVDO1NBQXZCLEVBSjNCIiwiZmlsZSI6Im5wbS9jb3JlLWpzQDEuMi42L2xpYnJhcnkvbW9kdWxlcy9lczUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAqLyBcbid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi8kJyksXG4gICAgJGV4cG9ydCA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKSxcbiAgICBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4vJC5kZXNjcmlwdG9ycycpLFxuICAgIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuLyQucHJvcGVydHktZGVzYycpLFxuICAgIGh0bWwgPSByZXF1aXJlKCcuLyQuaHRtbCcpLFxuICAgIGNlbCA9IHJlcXVpcmUoJy4vJC5kb20tY3JlYXRlJyksXG4gICAgaGFzID0gcmVxdWlyZSgnLi8kLmhhcycpLFxuICAgIGNvZiA9IHJlcXVpcmUoJy4vJC5jb2YnKSxcbiAgICBpbnZva2UgPSByZXF1aXJlKCcuLyQuaW52b2tlJyksXG4gICAgZmFpbHMgPSByZXF1aXJlKCcuLyQuZmFpbHMnKSxcbiAgICBhbk9iamVjdCA9IHJlcXVpcmUoJy4vJC5hbi1vYmplY3QnKSxcbiAgICBhRnVuY3Rpb24gPSByZXF1aXJlKCcuLyQuYS1mdW5jdGlvbicpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpLFxuICAgIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi8kLnRvLW9iamVjdCcpLFxuICAgIHRvSU9iamVjdCA9IHJlcXVpcmUoJy4vJC50by1pb2JqZWN0JyksXG4gICAgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi8kLnRvLWludGVnZXInKSxcbiAgICB0b0luZGV4ID0gcmVxdWlyZSgnLi8kLnRvLWluZGV4JyksXG4gICAgdG9MZW5ndGggPSByZXF1aXJlKCcuLyQudG8tbGVuZ3RoJyksXG4gICAgSU9iamVjdCA9IHJlcXVpcmUoJy4vJC5pb2JqZWN0JyksXG4gICAgSUVfUFJPVE8gPSByZXF1aXJlKCcuLyQudWlkJykoJ19fcHJvdG9fXycpLFxuICAgIGNyZWF0ZUFycmF5TWV0aG9kID0gcmVxdWlyZSgnLi8kLmFycmF5LW1ldGhvZHMnKSxcbiAgICBhcnJheUluZGV4T2YgPSByZXF1aXJlKCcuLyQuYXJyYXktaW5jbHVkZXMnKShmYWxzZSksXG4gICAgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuICAgIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG4gICAgYXJyYXlTbGljZSA9IEFycmF5UHJvdG8uc2xpY2UsXG4gICAgYXJyYXlKb2luID0gQXJyYXlQcm90by5qb2luLFxuICAgIGRlZmluZVByb3BlcnR5ID0gJC5zZXREZXNjLFxuICAgIGdldE93bkRlc2NyaXB0b3IgPSAkLmdldERlc2MsXG4gICAgZGVmaW5lUHJvcGVydGllcyA9ICQuc2V0RGVzY3MsXG4gICAgZmFjdG9yaWVzID0ge30sXG4gICAgSUU4X0RPTV9ERUZJTkU7XG5pZiAoIURFU0NSSVBUT1JTKSB7XG4gIElFOF9ET01fREVGSU5FID0gIWZhaWxzKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkZWZpbmVQcm9wZXJ0eShjZWwoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gNztcbiAgICAgIH19KS5hICE9IDc7XG4gIH0pO1xuICAkLnNldERlc2MgPSBmdW5jdGlvbihPLCBQLCBBdHRyaWJ1dGVzKSB7XG4gICAgaWYgKElFOF9ET01fREVGSU5FKVxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICBpZiAoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKVxuICAgICAgdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTtcbiAgICBpZiAoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKVxuICAgICAgYW5PYmplY3QoTylbUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICAgIHJldHVybiBPO1xuICB9O1xuICAkLmdldERlc2MgPSBmdW5jdGlvbihPLCBQKSB7XG4gICAgaWYgKElFOF9ET01fREVGSU5FKVxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGdldE93bkRlc2NyaXB0b3IoTywgUCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIGlmIChoYXMoTywgUCkpXG4gICAgICByZXR1cm4gY3JlYXRlRGVzYyghT2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChPLCBQKSwgT1tQXSk7XG4gIH07XG4gICQuc2V0RGVzY3MgPSBkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24oTywgUHJvcGVydGllcykge1xuICAgIGFuT2JqZWN0KE8pO1xuICAgIHZhciBrZXlzID0gJC5nZXRLZXlzKFByb3BlcnRpZXMpLFxuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIFA7XG4gICAgd2hpbGUgKGxlbmd0aCA+IGkpXG4gICAgICAkLnNldERlc2MoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7XG4gICAgcmV0dXJuIE87XG4gIH07XG59XG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFERVNDUklQVE9SUywgJ09iamVjdCcsIHtcbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAkLmdldERlc2MsXG4gIGRlZmluZVByb3BlcnR5OiAkLnNldERlc2MsXG4gIGRlZmluZVByb3BlcnRpZXM6IGRlZmluZVByb3BlcnRpZXNcbn0pO1xudmFyIGtleXMxID0gKCdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLCcgKyAndG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZicpLnNwbGl0KCcsJyksXG4gICAga2V5czIgPSBrZXlzMS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKSxcbiAgICBrZXlzTGVuMSA9IGtleXMxLmxlbmd0aDtcbnZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpZnJhbWUgPSBjZWwoJ2lmcmFtZScpLFxuICAgICAgaSA9IGtleXNMZW4xLFxuICAgICAgZ3QgPSAnPicsXG4gICAgICBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGh0bWwuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7XG4gIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIGlmcmFtZURvY3VtZW50Lm9wZW4oKTtcbiAgaWZyYW1lRG9jdW1lbnQud3JpdGUoJzxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8L3NjcmlwdCcgKyBndCk7XG4gIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG4gIGNyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GO1xuICB3aGlsZSAoaS0tKVxuICAgIGRlbGV0ZSBjcmVhdGVEaWN0LnByb3RvdHlwZVtrZXlzMVtpXV07XG4gIHJldHVybiBjcmVhdGVEaWN0KCk7XG59O1xudmFyIGNyZWF0ZUdldEtleXMgPSBmdW5jdGlvbihuYW1lcywgbGVuZ3RoKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIgTyA9IHRvSU9iamVjdChvYmplY3QpLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgcmVzdWx0ID0gW10sXG4gICAgICAgIGtleTtcbiAgICBmb3IgKGtleSBpbiBPKVxuICAgICAgaWYgKGtleSAhPSBJRV9QUk9UTylcbiAgICAgICAgaGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB3aGlsZSAobGVuZ3RoID4gaSlcbiAgICAgIGlmIChoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpIHtcbiAgICAgICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcbnZhciBFbXB0eSA9IGZ1bmN0aW9uKCkge307XG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtcbiAgZ2V0UHJvdG90eXBlT2Y6ICQuZ2V0UHJvdG8gPSAkLmdldFByb3RvIHx8IGZ1bmN0aW9uKE8pIHtcbiAgICBPID0gdG9PYmplY3QoTyk7XG4gICAgaWYgKGhhcyhPLCBJRV9QUk9UTykpXG4gICAgICByZXR1cm4gT1tJRV9QUk9UT107XG4gICAgaWYgKHR5cGVvZiBPLmNvbnN0cnVjdG9yID09ICdmdW5jdGlvbicgJiYgTyBpbnN0YW5jZW9mIE8uY29uc3RydWN0b3IpIHtcbiAgICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90byA6IG51bGw7XG4gIH0sXG4gIGdldE93blByb3BlcnR5TmFtZXM6ICQuZ2V0TmFtZXMgPSAkLmdldE5hbWVzIHx8IGNyZWF0ZUdldEtleXMoa2V5czIsIGtleXMyLmxlbmd0aCwgdHJ1ZSksXG4gIGNyZWF0ZTogJC5jcmVhdGUgPSAkLmNyZWF0ZSB8fCBmdW5jdGlvbihPLCBQcm9wZXJ0aWVzKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoTyAhPT0gbnVsbCkge1xuICAgICAgRW1wdHkucHJvdG90eXBlID0gYW5PYmplY3QoTyk7XG4gICAgICByZXN1bHQgPSBuZXcgRW1wdHkoKTtcbiAgICAgIEVtcHR5LnByb3RvdHlwZSA9IG51bGw7XG4gICAgICByZXN1bHRbSUVfUFJPVE9dID0gTztcbiAgICB9IGVsc2VcbiAgICAgIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTtcbiAgICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZGVmaW5lUHJvcGVydGllcyhyZXN1bHQsIFByb3BlcnRpZXMpO1xuICB9LFxuICBrZXlzOiAkLmdldEtleXMgPSAkLmdldEtleXMgfHwgY3JlYXRlR2V0S2V5cyhrZXlzMSwga2V5c0xlbjEsIGZhbHNlKVxufSk7XG52YXIgY29uc3RydWN0ID0gZnVuY3Rpb24oRiwgbGVuLCBhcmdzKSB7XG4gIGlmICghKGxlbiBpbiBmYWN0b3JpZXMpKSB7XG4gICAgZm9yICh2YXIgbiA9IFtdLFxuICAgICAgICBpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbltpXSA9ICdhWycgKyBpICsgJ10nO1xuICAgIGZhY3Rvcmllc1tsZW5dID0gRnVuY3Rpb24oJ0YsYScsICdyZXR1cm4gbmV3IEYoJyArIG4uam9pbignLCcpICsgJyknKTtcbiAgfVxuICByZXR1cm4gZmFjdG9yaWVzW2xlbl0oRiwgYXJncyk7XG59O1xuJGV4cG9ydCgkZXhwb3J0LlAsICdGdW5jdGlvbicsIHtiaW5kOiBmdW5jdGlvbiBiaW5kKHRoYXQpIHtcbiAgICB2YXIgZm4gPSBhRnVuY3Rpb24odGhpcyksXG4gICAgICAgIHBhcnRBcmdzID0gYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHBhcnRBcmdzLmNvbmNhdChhcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGJvdW5kID8gY29uc3RydWN0KGZuLCBhcmdzLmxlbmd0aCwgYXJncykgOiBpbnZva2UoZm4sIGFyZ3MsIHRoYXQpO1xuICAgIH07XG4gICAgaWYgKGlzT2JqZWN0KGZuLnByb3RvdHlwZSkpXG4gICAgICBib3VuZC5wcm90b3R5cGUgPSBmbi5wcm90b3R5cGU7XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9fSk7XG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCkge1xuICBpZiAoaHRtbClcbiAgICBhcnJheVNsaWNlLmNhbGwoaHRtbCk7XG59KSwgJ0FycmF5Jywge3NsaWNlOiBmdW5jdGlvbihiZWdpbiwgZW5kKSB7XG4gICAgdmFyIGxlbiA9IHRvTGVuZ3RoKHRoaXMubGVuZ3RoKSxcbiAgICAgICAga2xhc3MgPSBjb2YodGhpcyk7XG4gICAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiBlbmQ7XG4gICAgaWYgKGtsYXNzID09ICdBcnJheScpXG4gICAgICByZXR1cm4gYXJyYXlTbGljZS5jYWxsKHRoaXMsIGJlZ2luLCBlbmQpO1xuICAgIHZhciBzdGFydCA9IHRvSW5kZXgoYmVnaW4sIGxlbiksXG4gICAgICAgIHVwVG8gPSB0b0luZGV4KGVuZCwgbGVuKSxcbiAgICAgICAgc2l6ZSA9IHRvTGVuZ3RoKHVwVG8gLSBzdGFydCksXG4gICAgICAgIGNsb25lZCA9IEFycmF5KHNpemUpLFxuICAgICAgICBpID0gMDtcbiAgICBmb3IgKDsgaSA8IHNpemU7IGkrKylcbiAgICAgIGNsb25lZFtpXSA9IGtsYXNzID09ICdTdHJpbmcnID8gdGhpcy5jaGFyQXQoc3RhcnQgKyBpKSA6IHRoaXNbc3RhcnQgKyBpXTtcbiAgICByZXR1cm4gY2xvbmVkO1xuICB9fSk7XG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChJT2JqZWN0ICE9IE9iamVjdCksICdBcnJheScsIHtqb2luOiBmdW5jdGlvbiBqb2luKHNlcGFyYXRvcikge1xuICAgIHJldHVybiBhcnJheUpvaW4uY2FsbChJT2JqZWN0KHRoaXMpLCBzZXBhcmF0b3IgPT09IHVuZGVmaW5lZCA/ICcsJyA6IHNlcGFyYXRvcik7XG4gIH19KTtcbiRleHBvcnQoJGV4cG9ydC5TLCAnQXJyYXknLCB7aXNBcnJheTogcmVxdWlyZSgnLi8kLmlzLWFycmF5Jyl9KTtcbnZhciBjcmVhdGVBcnJheVJlZHVjZSA9IGZ1bmN0aW9uKGlzUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrZm4sIG1lbW8pIHtcbiAgICBhRnVuY3Rpb24oY2FsbGJhY2tmbik7XG4gICAgdmFyIE8gPSBJT2JqZWN0KHRoaXMpLFxuICAgICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCksXG4gICAgICAgIGluZGV4ID0gaXNSaWdodCA/IGxlbmd0aCAtIDEgOiAwLFxuICAgICAgICBpID0gaXNSaWdodCA/IC0xIDogMTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpXG4gICAgICBmb3IgKDsgOyApIHtcbiAgICAgICAgaWYgKGluZGV4IGluIE8pIHtcbiAgICAgICAgICBtZW1vID0gT1tpbmRleF07XG4gICAgICAgICAgaW5kZXggKz0gaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpbmRleCArPSBpO1xuICAgICAgICBpZiAoaXNSaWdodCA/IGluZGV4IDwgMCA6IGxlbmd0aCA8PSBpbmRleCkge1xuICAgICAgICAgIHRocm93IFR5cGVFcnJvcignUmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgZm9yICg7IGlzUmlnaHQgPyBpbmRleCA+PSAwIDogbGVuZ3RoID4gaW5kZXg7IGluZGV4ICs9IGkpXG4gICAgICBpZiAoaW5kZXggaW4gTykge1xuICAgICAgICBtZW1vID0gY2FsbGJhY2tmbihtZW1vLCBPW2luZGV4XSwgaW5kZXgsIHRoaXMpO1xuICAgICAgfVxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufTtcbnZhciBtZXRob2RpemUgPSBmdW5jdGlvbigkZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZzEpIHtcbiAgICByZXR1cm4gJGZuKHRoaXMsIGFyZzEsIGFyZ3VtZW50c1sxXSk7XG4gIH07XG59O1xuJGV4cG9ydCgkZXhwb3J0LlAsICdBcnJheScsIHtcbiAgZm9yRWFjaDogJC5lYWNoID0gJC5lYWNoIHx8IG1ldGhvZGl6ZShjcmVhdGVBcnJheU1ldGhvZCgwKSksXG4gIG1hcDogbWV0aG9kaXplKGNyZWF0ZUFycmF5TWV0aG9kKDEpKSxcbiAgZmlsdGVyOiBtZXRob2RpemUoY3JlYXRlQXJyYXlNZXRob2QoMikpLFxuICBzb21lOiBtZXRob2RpemUoY3JlYXRlQXJyYXlNZXRob2QoMykpLFxuICBldmVyeTogbWV0aG9kaXplKGNyZWF0ZUFycmF5TWV0aG9kKDQpKSxcbiAgcmVkdWNlOiBjcmVhdGVBcnJheVJlZHVjZShmYWxzZSksXG4gIHJlZHVjZVJpZ2h0OiBjcmVhdGVBcnJheVJlZHVjZSh0cnVlKSxcbiAgaW5kZXhPZjogbWV0aG9kaXplKGFycmF5SW5kZXhPZiksXG4gIGxhc3RJbmRleE9mOiBmdW5jdGlvbihlbCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIE8gPSB0b0lPYmplY3QodGhpcyksXG4gICAgICAgIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKSxcbiAgICAgICAgaW5kZXggPSBsZW5ndGggLSAxO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSlcbiAgICAgIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHRvSW50ZWdlcihmcm9tSW5kZXgpKTtcbiAgICBpZiAoaW5kZXggPCAwKVxuICAgICAgaW5kZXggPSB0b0xlbmd0aChsZW5ndGggKyBpbmRleCk7XG4gICAgZm9yICg7IGluZGV4ID49IDA7IGluZGV4LS0pXG4gICAgICBpZiAoaW5kZXggaW4gTylcbiAgICAgICAgaWYgKE9baW5kZXhdID09PSBlbClcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgcmV0dXJuIC0xO1xuICB9XG59KTtcbiRleHBvcnQoJGV4cG9ydC5TLCAnRGF0ZScsIHtub3c6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiArbmV3IERhdGU7XG4gIH19KTtcbnZhciBseiA9IGZ1bmN0aW9uKG51bSkge1xuICByZXR1cm4gbnVtID4gOSA/IG51bSA6ICcwJyArIG51bTtcbn07XG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChmYWlscyhmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKC01ZTEzIC0gMSkudG9JU09TdHJpbmcoKSAhPSAnMDM4NS0wNy0yNVQwNzowNjozOS45OTlaJztcbn0pIHx8ICFmYWlscyhmdW5jdGlvbigpIHtcbiAgbmV3IERhdGUoTmFOKS50b0lTT1N0cmluZygpO1xufSkpLCAnRGF0ZScsIHt0b0lTT1N0cmluZzogZnVuY3Rpb24gdG9JU09TdHJpbmcoKSB7XG4gICAgaWYgKCFpc0Zpbml0ZSh0aGlzKSlcbiAgICAgIHRocm93IFJhbmdlRXJyb3IoJ0ludmFsaWQgdGltZSB2YWx1ZScpO1xuICAgIHZhciBkID0gdGhpcyxcbiAgICAgICAgeSA9IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgICAgbSA9IGQuZ2V0VVRDTWlsbGlzZWNvbmRzKCksXG4gICAgICAgIHMgPSB5IDwgMCA/ICctJyA6IHkgPiA5OTk5ID8gJysnIDogJyc7XG4gICAgcmV0dXJuIHMgKyAoJzAwMDAwJyArIE1hdGguYWJzKHkpKS5zbGljZShzID8gLTYgOiAtNCkgKyAnLScgKyBseihkLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArIGx6KGQuZ2V0VVRDRGF0ZSgpKSArICdUJyArIGx6KGQuZ2V0VVRDSG91cnMoKSkgKyAnOicgKyBseihkLmdldFVUQ01pbnV0ZXMoKSkgKyAnOicgKyBseihkLmdldFVUQ1NlY29uZHMoKSkgKyAnLicgKyAobSA+IDk5ID8gbSA6ICcwJyArIGx6KG0pKSArICdaJztcbiAgfX0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
