'use strict';

System.register([], function (_export, _context) {
  var assert, util, Date2, d, orig, after, a, getter, setter, getterAndSetter, ex, x, subject;

  function test_color_style(style, input, implicit) {
    var color_name = util.inspect.styles[style];
    var color = ['', ''];
    if (util.inspect.colors[color_name]) color = util.inspect.colors[color_name];
    var without_color = util.inspect(input, false, 0, false);
    var with_color = util.inspect(input, false, 0, true);
    var expect = '\u001b[' + color[0] + 'm' + without_color + '\u001b[' + color[1] + 'm';
    assert.equal(with_color, expect, 'util.inspect color for style ' + style);
  }

  function test_lines(input) {
    var count_lines = function count_lines(str) {
      return (str.match(/\n/g) || []).length;
    };
    var without_color = util.inspect(input);
    var with_color = util.inspect(input, { colors: true });
    assert.equal(count_lines(without_color), count_lines(with_color));
  }
  return {
    setters: [],
    execute: function () {
      assert = require('assert');
      util = require('../../util');
      Date2 = require('vm').runInNewContext('Date');
      d = new Date2();
      orig = util.inspect(d);

      Date2.prototype.foo = 'bar';
      after = util.inspect(d);

      assert.equal(orig, after);
      a = ['foo', 'bar', 'baz'];

      assert.equal(util.inspect(a), '[ \'foo\', \'bar\', \'baz\' ]');
      delete a[1];
      assert.equal(util.inspect(a), '[ \'foo\', , \'baz\' ]');
      assert.equal(util.inspect(a, true), '[ \'foo\', , \'baz\', [length]: 3 ]');
      assert.equal(util.inspect(new Array(5)), '[ , , , ,  ]');
      getter = Object.create(null, { a: { get: function get() {
            return 'aaa';
          } } });
      setter = Object.create(null, { b: { set: function set() {} } });
      getterAndSetter = Object.create(null, { c: {
          get: function get() {
            return 'ccc';
          },
          set: function set() {}
        } });

      assert.equal(util.inspect(getter, true), '{ [a]: [Getter] }');
      assert.equal(util.inspect(setter, true), '{ [b]: [Setter] }');
      assert.equal(util.inspect(getterAndSetter, true), '{ [c]: [Getter/Setter] }');
      assert.equal(util.inspect(new Error()), '[Error]');
      assert.equal(util.inspect(new Error('FAIL')), '[Error: FAIL]');
      assert.equal(util.inspect(new TypeError('FAIL')), '[TypeError: FAIL]');
      assert.equal(util.inspect(new SyntaxError('FAIL')), '[SyntaxError: FAIL]');
      try {
        undef();
      } catch (e) {
        assert.equal(util.inspect(e), '[ReferenceError: undef is not defined]');
      }
      ex = util.inspect(new Error('FAIL'), true);

      assert.ok(ex.indexOf('[Error: FAIL]') != -1);
      assert.ok(ex.indexOf('[stack]') != -1);
      assert.ok(ex.indexOf('[message]') != -1);
      assert.equal(util.inspect(Object.create(Date.prototype)), '{}');
      assert.doesNotThrow(function () {
        var d = new Date();
        d.toUTCString = null;
        util.inspect(d);
      });
      assert.doesNotThrow(function () {
        var r = /regexp/;
        r.toString = null;
        util.inspect(r);
      });
      assert.doesNotThrow(function () {
        util.inspect([{ inspect: function inspect() {
            return 123;
          } }]);
      });
      x = { inspect: util.inspect };

      assert.ok(util.inspect(x).indexOf('inspect') != -1);test_color_style('special', function () {});
      test_color_style('number', 123.456);
      test_color_style('boolean', true);
      test_color_style('undefined', undefined);
      test_color_style('null', null);
      test_color_style('string', 'test string');
      test_color_style('date', new Date());
      test_color_style('regexp', /regexp/);
      assert.doesNotThrow(function () {
        util.inspect({ hasOwnProperty: null });
      });
      subject = {
        foo: 'bar',
        hello: 31,
        a: { b: { c: { d: 0 } } }
      };

      Object.defineProperty(subject, 'hidden', {
        enumerable: false,
        value: null
      });
      assert(util.inspect(subject, { showHidden: false }).indexOf('hidden') === -1);
      assert(util.inspect(subject, { showHidden: true }).indexOf('hidden') !== -1);
      assert(util.inspect(subject, { colors: false }).indexOf('\u001b[32m') === -1);
      assert(util.inspect(subject, { colors: true }).indexOf('\u001b[32m') !== -1);
      assert(util.inspect(subject, { depth: 2 }).indexOf('c: [Object]') !== -1);
      assert(util.inspect(subject, { depth: 0 }).indexOf('a: [Object]') !== -1);
      assert(util.inspect(subject, { depth: null }).indexOf('{ d: 0 }') !== -1);
      subject = { inspect: function inspect() {
          return 123;
        } };
      assert(util.inspect(subject, { customInspect: true }).indexOf('123') !== -1);
      assert(util.inspect(subject, { customInspect: true }).indexOf('inspect') === -1);
      assert(util.inspect(subject, { customInspect: false }).indexOf('123') === -1);
      assert(util.inspect(subject, { customInspect: false }).indexOf('inspect') !== -1);
      subject.inspect = function () {
        return { foo: 'bar' };
      };
      assert.equal(util.inspect(subject), '{ foo: \'bar\' }');
      subject.inspect = function (depth, opts) {
        assert.strictEqual(opts.customInspectOptions, true);
      };
      util.inspect(subject, { customInspectOptions: true });test_lines([1, 2, 3, 4, 5, 6, 7]);
      test_lines(function () {
        var big_array = [];
        for (var i = 0; i < 100; i++) {
          big_array.push(i);
        }
        return big_array;
      }());
      test_lines({
        foo: 'bar',
        baz: 35,
        b: { a: 35 }
      });
      test_lines({
        foo: 'bar',
        baz: 35,
        b: { a: 35 },
        very_long_key: 'very_long_value',
        even_longer_key: ['with even longer value in array']
      });
    }
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5wbS91dGlsQDAuMTAuMy90ZXN0L25vZGUvaW5zcGVjdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQTJEQSxXQUFTLGdCQUFULENBQTBCLEtBQTFCLEVBQWlDLEtBQWpDLEVBQXdDLFFBQXhDLEVBQWtEO0FBQ2hELFFBQUksYUFBYSxLQUFLLE9BQUwsQ0FBYSxNQUFiLENBQW9CLEtBQXBCLENBQWIsQ0FENEM7QUFFaEQsUUFBSSxRQUFRLENBQUMsRUFBRCxFQUFLLEVBQUwsQ0FBUixDQUY0QztBQUdoRCxRQUFJLEtBQUssT0FBTCxDQUFhLE1BQWIsQ0FBb0IsVUFBcEIsQ0FBSixFQUNFLFFBQVEsS0FBSyxPQUFMLENBQWEsTUFBYixDQUFvQixVQUFwQixDQUFSLENBREY7QUFFQSxRQUFJLGdCQUFnQixLQUFLLE9BQUwsQ0FBYSxLQUFiLEVBQW9CLEtBQXBCLEVBQTJCLENBQTNCLEVBQThCLEtBQTlCLENBQWhCLENBTDRDO0FBTWhELFFBQUksYUFBYSxLQUFLLE9BQUwsQ0FBYSxLQUFiLEVBQW9CLEtBQXBCLEVBQTJCLENBQTNCLEVBQThCLElBQTlCLENBQWIsQ0FONEM7QUFPaEQsUUFBSSxTQUFTLFlBQVksTUFBTSxDQUFOLENBQVosR0FBdUIsR0FBdkIsR0FBNkIsYUFBN0IsR0FBNkMsU0FBN0MsR0FBeUQsTUFBTSxDQUFOLENBQXpELEdBQW9FLEdBQXBFLENBUG1DO0FBUWhELFdBQU8sS0FBUCxDQUFhLFVBQWIsRUFBeUIsTUFBekIsRUFBaUMsa0NBQWtDLEtBQWxDLENBQWpDLENBUmdEO0dBQWxEOztBQW9EQSxXQUFTLFVBQVQsQ0FBb0IsS0FBcEIsRUFBMkI7QUFDekIsUUFBSSxjQUFjLFNBQWQsV0FBYyxDQUFTLEdBQVQsRUFBYztBQUM5QixhQUFPLENBQUMsSUFBSSxLQUFKLENBQVUsS0FBVixLQUFvQixFQUFwQixDQUFELENBQXlCLE1BQXpCLENBRHVCO0tBQWQsQ0FETztBQUl6QixRQUFJLGdCQUFnQixLQUFLLE9BQUwsQ0FB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c0JBQXNCLElBQXRCLEVBQXZCLEVBU0EsV0FBVyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLENBQWhCLEVBQW1CLENBQW5CLENBQVg7QUFDQSxpQkFBVyxZQUFXO0FBQ3BCLFlBQUksWUFBWSxFQUFaLENBRGdCO0FBRXBCLGFBQUssSUFBSSxJQUFJLENBQUosRUFBTyxJQUFJLEdBQUosRUFBUyxHQUF6QixFQUE4QjtBQUM1QixvQkFBVSxJQUFWLENBQWUsQ0FBZixFQUQ0QjtTQUE5QjtBQUdBLGVBQU8sU0FBUCxDQUxvQjtPQUFYLEVBQVg7QUFPQSxpQkFBVztBQUNULGFBQUssS0FBTDtBQUNBLGFBQUssRUFBTDtBQUNBLFdBQUcsRUFBQyxHQUFHLEVBQUgsRUFBSjtPQUhGO0FBS0EsaUJBQVc7QUFDVCxhQUFLLEtBQUw7QUFDQSxhQUFLLEVBQUw7QUFDQSxXQUFHLEVBQUMsR0FBRyxFQUFILEVBQUo7QUFDQSx1QkFBZSxpQkFBZjtBQUNBLHlCQUFpQixDQUFDLGlDQUFELENBQWpCO09BTEYiLCJmaWxlIjoibnBtL3V0aWxAMC4xMC4zL3Rlc3Qvbm9kZS9pbnNwZWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogKi8gXG52YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKTtcbnZhciBEYXRlMiA9IHJlcXVpcmUoJ3ZtJykucnVuSW5OZXdDb250ZXh0KCdEYXRlJyk7XG52YXIgZCA9IG5ldyBEYXRlMigpO1xudmFyIG9yaWcgPSB1dGlsLmluc3BlY3QoZCk7XG5EYXRlMi5wcm90b3R5cGUuZm9vID0gJ2Jhcic7XG52YXIgYWZ0ZXIgPSB1dGlsLmluc3BlY3QoZCk7XG5hc3NlcnQuZXF1YWwob3JpZywgYWZ0ZXIpO1xudmFyIGEgPSBbJ2ZvbycsICdiYXInLCAnYmF6J107XG5hc3NlcnQuZXF1YWwodXRpbC5pbnNwZWN0KGEpLCAnWyBcXCdmb29cXCcsIFxcJ2JhclxcJywgXFwnYmF6XFwnIF0nKTtcbmRlbGV0ZSBhWzFdO1xuYXNzZXJ0LmVxdWFsKHV0aWwuaW5zcGVjdChhKSwgJ1sgXFwnZm9vXFwnLCAsIFxcJ2JhelxcJyBdJyk7XG5hc3NlcnQuZXF1YWwodXRpbC5pbnNwZWN0KGEsIHRydWUpLCAnWyBcXCdmb29cXCcsICwgXFwnYmF6XFwnLCBbbGVuZ3RoXTogMyBdJyk7XG5hc3NlcnQuZXF1YWwodXRpbC5pbnNwZWN0KG5ldyBBcnJheSg1KSksICdbICwgLCAsICwgIF0nKTtcbnZhciBnZXR0ZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHthOiB7Z2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnYWFhJztcbiAgICB9fX0pO1xudmFyIHNldHRlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge2I6IHtzZXQ6IGZ1bmN0aW9uKCkge319fSk7XG52YXIgZ2V0dGVyQW5kU2V0dGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7Yzoge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJ2NjYyc7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKCkge31cbiAgfX0pO1xuYXNzZXJ0LmVxdWFsKHV0aWwuaW5zcGVjdChnZXR0ZXIsIHRydWUpLCAneyBbYV06IFtHZXR0ZXJdIH0nKTtcbmFzc2VydC5lcXVhbCh1dGlsLmluc3BlY3Qoc2V0dGVyLCB0cnVlKSwgJ3sgW2JdOiBbU2V0dGVyXSB9Jyk7XG5hc3NlcnQuZXF1YWwodXRpbC5pbnNwZWN0KGdldHRlckFuZFNldHRlciwgdHJ1ZSksICd7IFtjXTogW0dldHRlci9TZXR0ZXJdIH0nKTtcbmFzc2VydC5lcXVhbCh1dGlsLmluc3BlY3QobmV3IEVycm9yKCkpLCAnW0Vycm9yXScpO1xuYXNzZXJ0LmVxdWFsKHV0aWwuaW5zcGVjdChuZXcgRXJyb3IoJ0ZBSUwnKSksICdbRXJyb3I6IEZBSUxdJyk7XG5hc3NlcnQuZXF1YWwodXRpbC5pbnNwZWN0KG5ldyBUeXBlRXJyb3IoJ0ZBSUwnKSksICdbVHlwZUVycm9yOiBGQUlMXScpO1xuYXNzZXJ0LmVxdWFsKHV0aWwuaW5zcGVjdChuZXcgU3ludGF4RXJyb3IoJ0ZBSUwnKSksICdbU3ludGF4RXJyb3I6IEZBSUxdJyk7XG50cnkge1xuICB1bmRlZigpO1xufSBjYXRjaCAoZSkge1xuICBhc3NlcnQuZXF1YWwodXRpbC5pbnNwZWN0KGUpLCAnW1JlZmVyZW5jZUVycm9yOiB1bmRlZiBpcyBub3QgZGVmaW5lZF0nKTtcbn1cbnZhciBleCA9IHV0aWwuaW5zcGVjdChuZXcgRXJyb3IoJ0ZBSUwnKSwgdHJ1ZSk7XG5hc3NlcnQub2soZXguaW5kZXhPZignW0Vycm9yOiBGQUlMXScpICE9IC0xKTtcbmFzc2VydC5vayhleC5pbmRleE9mKCdbc3RhY2tdJykgIT0gLTEpO1xuYXNzZXJ0Lm9rKGV4LmluZGV4T2YoJ1ttZXNzYWdlXScpICE9IC0xKTtcbmFzc2VydC5lcXVhbCh1dGlsLmluc3BlY3QoT2JqZWN0LmNyZWF0ZShEYXRlLnByb3RvdHlwZSkpLCAne30nKTtcbmFzc2VydC5kb2VzTm90VGhyb3coZnVuY3Rpb24oKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgZC50b1VUQ1N0cmluZyA9IG51bGw7XG4gIHV0aWwuaW5zcGVjdChkKTtcbn0pO1xuYXNzZXJ0LmRvZXNOb3RUaHJvdyhmdW5jdGlvbigpIHtcbiAgdmFyIHIgPSAvcmVnZXhwLztcbiAgci50b1N0cmluZyA9IG51bGw7XG4gIHV0aWwuaW5zcGVjdChyKTtcbn0pO1xuYXNzZXJ0LmRvZXNOb3RUaHJvdyhmdW5jdGlvbigpIHtcbiAgdXRpbC5pbnNwZWN0KFt7aW5zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gMTIzO1xuICAgIH19XSk7XG59KTtcbnZhciB4ID0ge2luc3BlY3Q6IHV0aWwuaW5zcGVjdH07XG5hc3NlcnQub2sodXRpbC5pbnNwZWN0KHgpLmluZGV4T2YoJ2luc3BlY3QnKSAhPSAtMSk7XG5mdW5jdGlvbiB0ZXN0X2NvbG9yX3N0eWxlKHN0eWxlLCBpbnB1dCwgaW1wbGljaXQpIHtcbiAgdmFyIGNvbG9yX25hbWUgPSB1dGlsLmluc3BlY3Quc3R5bGVzW3N0eWxlXTtcbiAgdmFyIGNvbG9yID0gWycnLCAnJ107XG4gIGlmICh1dGlsLmluc3BlY3QuY29sb3JzW2NvbG9yX25hbWVdKVxuICAgIGNvbG9yID0gdXRpbC5pbnNwZWN0LmNvbG9yc1tjb2xvcl9uYW1lXTtcbiAgdmFyIHdpdGhvdXRfY29sb3IgPSB1dGlsLmluc3BlY3QoaW5wdXQsIGZhbHNlLCAwLCBmYWxzZSk7XG4gIHZhciB3aXRoX2NvbG9yID0gdXRpbC5pbnNwZWN0KGlucHV0LCBmYWxzZSwgMCwgdHJ1ZSk7XG4gIHZhciBleHBlY3QgPSAnXFx1MDAxYlsnICsgY29sb3JbMF0gKyAnbScgKyB3aXRob3V0X2NvbG9yICsgJ1xcdTAwMWJbJyArIGNvbG9yWzFdICsgJ20nO1xuICBhc3NlcnQuZXF1YWwod2l0aF9jb2xvciwgZXhwZWN0LCAndXRpbC5pbnNwZWN0IGNvbG9yIGZvciBzdHlsZSAnICsgc3R5bGUpO1xufVxudGVzdF9jb2xvcl9zdHlsZSgnc3BlY2lhbCcsIGZ1bmN0aW9uKCkge30pO1xudGVzdF9jb2xvcl9zdHlsZSgnbnVtYmVyJywgMTIzLjQ1Nik7XG50ZXN0X2NvbG9yX3N0eWxlKCdib29sZWFuJywgdHJ1ZSk7XG50ZXN0X2NvbG9yX3N0eWxlKCd1bmRlZmluZWQnLCB1bmRlZmluZWQpO1xudGVzdF9jb2xvcl9zdHlsZSgnbnVsbCcsIG51bGwpO1xudGVzdF9jb2xvcl9zdHlsZSgnc3RyaW5nJywgJ3Rlc3Qgc3RyaW5nJyk7XG50ZXN0X2NvbG9yX3N0eWxlKCdkYXRlJywgbmV3IERhdGUpO1xudGVzdF9jb2xvcl9zdHlsZSgncmVnZXhwJywgL3JlZ2V4cC8pO1xuYXNzZXJ0LmRvZXNOb3RUaHJvdyhmdW5jdGlvbigpIHtcbiAgdXRpbC5pbnNwZWN0KHtoYXNPd25Qcm9wZXJ0eTogbnVsbH0pO1xufSk7XG52YXIgc3ViamVjdCA9IHtcbiAgZm9vOiAnYmFyJyxcbiAgaGVsbG86IDMxLFxuICBhOiB7Yjoge2M6IHtkOiAwfX19XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YmplY3QsICdoaWRkZW4nLCB7XG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICB2YWx1ZTogbnVsbFxufSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtzaG93SGlkZGVuOiBmYWxzZX0pLmluZGV4T2YoJ2hpZGRlbicpID09PSAtMSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtzaG93SGlkZGVuOiB0cnVlfSkuaW5kZXhPZignaGlkZGVuJykgIT09IC0xKTtcbmFzc2VydCh1dGlsLmluc3BlY3Qoc3ViamVjdCwge2NvbG9yczogZmFsc2V9KS5pbmRleE9mKCdcXHUwMDFiWzMybScpID09PSAtMSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtjb2xvcnM6IHRydWV9KS5pbmRleE9mKCdcXHUwMDFiWzMybScpICE9PSAtMSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtkZXB0aDogMn0pLmluZGV4T2YoJ2M6IFtPYmplY3RdJykgIT09IC0xKTtcbmFzc2VydCh1dGlsLmluc3BlY3Qoc3ViamVjdCwge2RlcHRoOiAwfSkuaW5kZXhPZignYTogW09iamVjdF0nKSAhPT0gLTEpO1xuYXNzZXJ0KHV0aWwuaW5zcGVjdChzdWJqZWN0LCB7ZGVwdGg6IG51bGx9KS5pbmRleE9mKCd7IGQ6IDAgfScpICE9PSAtMSk7XG5zdWJqZWN0ID0ge2luc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAxMjM7XG4gIH19O1xuYXNzZXJ0KHV0aWwuaW5zcGVjdChzdWJqZWN0LCB7Y3VzdG9tSW5zcGVjdDogdHJ1ZX0pLmluZGV4T2YoJzEyMycpICE9PSAtMSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtjdXN0b21JbnNwZWN0OiB0cnVlfSkuaW5kZXhPZignaW5zcGVjdCcpID09PSAtMSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtjdXN0b21JbnNwZWN0OiBmYWxzZX0pLmluZGV4T2YoJzEyMycpID09PSAtMSk7XG5hc3NlcnQodXRpbC5pbnNwZWN0KHN1YmplY3QsIHtjdXN0b21JbnNwZWN0OiBmYWxzZX0pLmluZGV4T2YoJ2luc3BlY3QnKSAhPT0gLTEpO1xuc3ViamVjdC5pbnNwZWN0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7Zm9vOiAnYmFyJ307XG59O1xuYXNzZXJ0LmVxdWFsKHV0aWwuaW5zcGVjdChzdWJqZWN0KSwgJ3sgZm9vOiBcXCdiYXJcXCcgfScpO1xuc3ViamVjdC5pbnNwZWN0ID0gZnVuY3Rpb24oZGVwdGgsIG9wdHMpIHtcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKG9wdHMuY3VzdG9tSW5zcGVjdE9wdGlvbnMsIHRydWUpO1xufTtcbnV0aWwuaW5zcGVjdChzdWJqZWN0LCB7Y3VzdG9tSW5zcGVjdE9wdGlvbnM6IHRydWV9KTtcbmZ1bmN0aW9uIHRlc3RfbGluZXMoaW5wdXQpIHtcbiAgdmFyIGNvdW50X2xpbmVzID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIChzdHIubWF0Y2goL1xcbi9nKSB8fCBbXSkubGVuZ3RoO1xuICB9O1xuICB2YXIgd2l0aG91dF9jb2xvciA9IHV0aWwuaW5zcGVjdChpbnB1dCk7XG4gIHZhciB3aXRoX2NvbG9yID0gdXRpbC5pbnNwZWN0KGlucHV0LCB7Y29sb3JzOiB0cnVlfSk7XG4gIGFzc2VydC5lcXVhbChjb3VudF9saW5lcyh3aXRob3V0X2NvbG9yKSwgY291bnRfbGluZXMod2l0aF9jb2xvcikpO1xufVxudGVzdF9saW5lcyhbMSwgMiwgMywgNCwgNSwgNiwgN10pO1xudGVzdF9saW5lcyhmdW5jdGlvbigpIHtcbiAgdmFyIGJpZ19hcnJheSA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgYmlnX2FycmF5LnB1c2goaSk7XG4gIH1cbiAgcmV0dXJuIGJpZ19hcnJheTtcbn0oKSk7XG50ZXN0X2xpbmVzKHtcbiAgZm9vOiAnYmFyJyxcbiAgYmF6OiAzNSxcbiAgYjoge2E6IDM1fVxufSk7XG50ZXN0X2xpbmVzKHtcbiAgZm9vOiAnYmFyJyxcbiAgYmF6OiAzNSxcbiAgYjoge2E6IDM1fSxcbiAgdmVyeV9sb25nX2tleTogJ3ZlcnlfbG9uZ192YWx1ZScsXG4gIGV2ZW5fbG9uZ2VyX2tleTogWyd3aXRoIGV2ZW4gbG9uZ2VyIHZhbHVlIGluIGFycmF5J11cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
